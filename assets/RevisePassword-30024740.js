import{s as r,N as _,F as P,d as b,e as g,B as y}from"./vant-0fe543f7.js";import{u as V}from"./vue-router-cb3f8704.js";import{a as m}from"./validatorUtil-fa8d24ca.js";import{a as x}from"./index-98a8b0fc.js";import{_ as B}from"./index-40edb61c.js";import{b as N,R,V as C,C as a,u as n,U as d,W as k,K as U}from"./@vue-b391e2c0.js";import"./@vant-803324af.js";import"./index-b9788df0.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./pinia-49471876.js";import"./@vueuse-9a68d694.js";import"./pinia-plugin-persistedstate-c44f3b64.js";const F={class:"revise-form"},$={class:"submit-login-btn"},S={__name:"RevisePassword",setup(D){const u=V(),o=N({oldPassword:"",newPassword:"",confirmPassword:""}),i=t=>o.value.newPassword===""?"请先输入新密码":t!==o.value.newPassword?"两次输入密码不一致":!0,p=async()=>{const t={oldPassword:o.value.oldPassword,newPassword:o.value.newPassword},e=await x(t);e!==null&&e.code===2e3?(r({type:"success",message:"修改密码成功"}),o.value={oldPassword:"",newPassword:"",confirmPassword:""}):e!==null?r({type:"danger",message:`修改密码失败,${e.msg},请刷新页面重试`}):r({type:"danger",message:"修改密码失败,请刷新页面重试"})};return(t,e)=>{const w=_,l=b,c=g,f=y,v=P;return R(),C("div",F,[a(w,{title:"修改密码","left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=s=>n(u).go(-1))}),a(v,{style:{"margin-top":"5%"},onSubmit:e[4]||(e[4]=s=>p())},{default:d(()=>[a(c,{inset:"",style:{padding:"1%"}},{default:d(()=>[a(l,{modelValue:o.value.oldPassword,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.oldPassword=s),name:"旧密码",label:"旧密码",type:"password",placeholder:"请输入旧密码",autocomplete:"off",clearable:"",rules:[{validator:n(m),message:"应为4-16位数字/字母/下划线"}]},null,8,["modelValue","rules"]),a(l,{modelValue:o.value.newPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.newPassword=s),name:"新密码",label:"新密码",type:"password",placeholder:"请输入新密码",autocomplete:"off",clearable:"",rules:[{validator:n(m),message:"应为4-16位数字/字母/下划线"}]},null,8,["modelValue","rules"]),a(l,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.confirmPassword=s),name:"确认新密码",label:"确认新密码",type:"password",placeholder:"请确认新密码",autocomplete:"off",clearable:"",rules:[{validator:i,message:"应为4-16位数字/字母/下划线"}]},null,8,["modelValue","rules"])]),_:1}),k("div",$,[a(f,{plain:"",block:"",type:"primary","native-type":"submit"},{default:d(()=>[U(" 修改密码 ")]),_:1})])]),_:1})])}}},M=B(S,[["__scopeId","data-v-42847097"]]);export{M as default};
