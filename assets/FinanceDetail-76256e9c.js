import{s as d,N as C,e as U,B as k,A as N,d as T}from"./vant-60b60113.js";import{u as B}from"./vue-router-05758286.js";import{a as S}from"./index-0e9cbc34.js";import{_ as F}from"./index-995aa90f.js";import{b as s,c as $,R as p,V as v,C as l,u as D,U as c,Y as P,K as R}from"./@vue-802b571a.js";import"./@vant-176bc72f.js";import"./index-42dc619c.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./pinia-f48910fc.js";import"./@vueuse-94ed6524.js";import"./pinia-plugin-persistedstate-c44f3b64.js";const A={class:"finance-detail-form"},q={key:0,class:"start-pay-btn"},E={__name:"FinanceDetail",setup(G){const u=B(),a=s({id:0,price:0,status:"",type:"",createTime:"",updateTime:""}),f=[{text:"押金",value:0},{text:"住宿费",value:1},{text:"网费",value:2}],y=[{text:"未支付",value:0},{text:"支付中 等待回调",value:1},{text:"支付完成",value:2}],i=s(""),r=s("");$(()=>{a.value=JSON.parse(u.currentRoute.value.query.finance),i.value=f[a.value.type].text,r.value=y[a.value.status].text});const o=s(!1),_=[{name:"支付宝支付"}],V=async m=>{if(m.name==="支付宝支付")try{const e=await S(a.value.id);e!==null&&e.code===2e3?(o.value=!1,document.write(e.payUrl)):e!==null?d({type:"danger",message:`支付失败,${e.msg}`}):d({type:"danger",message:"支付失败,请检查网络连接"})}catch(e){console.log(e)}finally{o.value=!1,await u.push("/main/finance/finance-list")}else d({type:"danger",message:"暂不支持该支付方式"})};return(m,e)=>{const x=C,n=T,g=U,b=k,w=N;return p(),v("div",A,[l(x,{title:"查看账单信息","left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=t=>D(u).go(-1))}),l(g,{inset:"",style:{"margin-top":"5%"}},{default:c(()=>[l(n,{modelValue:a.value.id,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.id=t),readonly:"",label:"账单编号"},null,8,["modelValue"]),l(n,{modelValue:a.value.price,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.price=t),readonly:"",label:"账单价格"},null,8,["modelValue"]),l(n,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),readonly:"",label:"账单类型"},null,8,["modelValue"]),l(n,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value=t),readonly:"",label:"账单状态"},null,8,["modelValue"]),l(n,{modelValue:a.value.createTime,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.createTime=t),readonly:"",label:"创建时间"},null,8,["modelValue"]),l(n,{modelValue:a.value.updateTime,"onUpdate:modelValue":e[6]||(e[6]=t=>a.value.updateTime=t),readonly:"",label:"更新时间"},null,8,["modelValue"])]),_:1}),a.value.status===0?(p(),v("div",q,[l(b,{plain:"",block:"",type:"primary",onClick:e[7]||(e[7]=t=>o.value=!0)},{default:c(()=>[R(" 开始支付 ")]),_:1})])):P("",!0),l(w,{show:o.value,"onUpdate:show":e[8]||(e[8]=t=>o.value=t),actions:_,"cancel-text":"取消","close-on-click-action":"",onCancel:e[9]||(e[9]=t=>o.value=!1),description:"请选择支付方式",onSelect:V},null,8,["show"])])}}},X=F(E,[["__scopeId","data-v-645c481f"]]);export{X as default};
