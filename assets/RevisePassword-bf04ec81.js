import{s as l,N as _,F as P,d as b,e as y,B as g}from"./vant-51b1534e.js";import{u as V}from"./vue-router-05758286.js";import{a as m}from"./validatorUtil-fa8d24ca.js";import{b as x}from"./index-7df2a9ec.js";import{_ as B}from"./index-a4fae6cb.js";import{b as N,R,V as C,C as a,u as n,U as d,W as k,K as U}from"./@vue-802b571a.js";import"./@vant-176bc72f.js";import"./index-bdafc09e.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./pinia-f48910fc.js";import"./@vueuse-94ed6524.js";import"./pinia-plugin-persistedstate-c44f3b64.js";const F={class:"revise-form"},$={class:"submit-revise-btn"},S={__name:"RevisePassword",setup(D){const u=V(),o=N({oldPassword:"",newPassword:"",confirmPassword:""}),i=t=>o.value.newPassword===""?"请先输入新密码":t!==o.value.newPassword?"两次输入密码不一致":!0,p=async()=>{const t={oldPassword:o.value.oldPassword,newPassword:o.value.newPassword},e=await x(t);e!==null&&e.code===2e3?(l({type:"success",message:"修改密码成功"}),o.value={oldPassword:"",newPassword:"",confirmPassword:""}):e!==null?l({type:"danger",message:`修改密码失败,${e.msg},请刷新页面重试`}):l({type:"danger",message:"修改密码失败,请刷新页面重试"})};return(t,e)=>{const w=_,r=b,c=y,v=g,f=P;return R(),C("div",F,[a(w,{title:"修改密码","left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=s=>n(u).go(-1))}),a(f,{style:{"margin-top":"5%"},onSubmit:e[4]||(e[4]=s=>p())},{default:d(()=>[a(c,{inset:"",style:{padding:"1%"}},{default:d(()=>[a(r,{modelValue:o.value.oldPassword,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.oldPassword=s),name:"旧密码",label:"旧密码",type:"password",placeholder:"请输入旧密码",autocomplete:"off",clearable:"",rules:[{validator:n(m),message:"应为4-16位数字/字母/下划线"}]},null,8,["modelValue","rules"]),a(r,{modelValue:o.value.newPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.newPassword=s),name:"新密码",label:"新密码",type:"password",placeholder:"请输入新密码",autocomplete:"off",clearable:"",rules:[{validator:n(m),message:"应为4-16位数字/字母/下划线"}]},null,8,["modelValue","rules"]),a(r,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.confirmPassword=s),name:"确认新密码",label:"确认新密码",type:"password",placeholder:"请确认新密码",autocomplete:"off",clearable:"",rules:[{validator:i,message:"应为4-16位数字/字母/下划线"}]},null,8,["modelValue","rules"])]),_:1}),k("div",$,[a(v,{plain:"",block:"",type:"primary","native-type":"submit"},{default:d(()=>[U(" 修改密码 ")]),_:1})])]),_:1})])}}},M=B(S,[["__scopeId","data-v-b38c1dbe"]]);export{M as default};
