import{s as g,T as x,k}from"./vant-51b1534e.js";import{a as S,u as C}from"./index-e822aa76.js";import{s as y}from"./pinia-f48910fc.js";import{u as h}from"./vue-router-05758286.js";import{h as V}from"./index-ddbe726d.js";import{b as w,c as b,R as f,S as N,U as m,C as u,K as d,w as $,Q as B,V as E,Y as I,Z as R,_ as U,W as M}from"./@vue-802b571a.js";import{_ as P}from"./index-a4fae6cb.js";import"./@vant-176bc72f.js";import"./index-bdafc09e.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./@vueuse-94ed6524.js";import"./pinia-plugin-persistedstate-c44f3b64.js";const O={__name:"NavBar",setup(r){const a=h(),n=w("carpooling"),i=S(),{nav:t}=y(i),c=C(),{currentUser:_}=y(c),v=async()=>{const o=await V();o!==null&&o.code===2e3?c.$patch(e=>{e.currentUser=o.result}):o!==null?g({type:"danger",message:`首页初始化失败,${o.msg},请刷新页面重试`}):g({type:"danger",message:"首页初始化失败,请刷新页面重试"})},p=(o,e)=>{i.$patch(s=>{s.nav.currentNav=o,s.nav.to=e})};return b(async()=>{n.value=t.value.currentNav,_.value.isDeleted===1&&await v(),await a.push(t.value.to)}),(o,e)=>{const s=x,T=k;return f(),N(T,{modelValue:n.value,"onUpdate:modelValue":e[4]||(e[4]=l=>n.value=l)},{default:m(()=>[u(s,{name:"application",icon:"todo-list-o",to:"/main/application/application-list",onClick:e[0]||(e[0]=l=>p("application","/main/application/application-list"))},{default:m(()=>[d(" 我的申请 ")]),_:1}),u(s,{name:"finance",icon:"balance-list-o",to:"/main/finance/finance-list",onClick:e[1]||(e[1]=l=>p("finance","/main/finance/finance-list"))},{default:m(()=>[d(" 我的账单 ")]),_:1}),u(s,{name:"message",icon:"chat-o",to:"/main/message/message-list",onClick:e[2]||(e[2]=l=>p("message","/main/message/message-list"))},{default:m(()=>[d(" 我的消息 ")]),_:1}),u(s,{name:"my",icon:"user-o",to:"/main/my/my-home",onClick:e[3]||(e[3]=l=>p("my","/main/my/my-home"))},{default:m(()=>[d(" 我 ")]),_:1})]),_:1},8,["modelValue"])}}};const D=r=>(R("data-v-10d5fc02"),r=r(),U(),r),G={class:"main-page-container"},K=D(()=>M("div",{class:"empty-content"},null,-1)),L={__name:"MainPage",setup(r){const a=w(!1),n=h(),i=["/main/application/application-list","/main/finance/finance-list","/main/message/message-list","/main/my/my-home"];let t;return $(()=>n.currentRoute.value.path,c=>{t=0,a.value=i.indexOf(c)!==-1}),b(()=>{i.indexOf(n.currentRoute.value.path)!==-1&&(a.value=!0),t=0}),window.onscroll=function(){i.indexOf(n.currentRoute.value.path)!==-1&&(document.documentElement.scrollTop<5&&(a.value=!0),document.documentElement.scrollTop-t>10&&a.value?(a.value=!1,t=document.documentElement.scrollTop):t-document.documentElement.scrollTop>10&&!a.value&&(a.value=!0,t=document.documentElement.scrollTop))},(c,_)=>{const v=B("router-view");return f(),E("div",G,[u(v,{class:"main-router-container"}),K,a.value?(f(),N(O,{key:0,class:"nav-container"})):I("",!0)])}}},ae=P(L,[["__scopeId","data-v-10d5fc02"]]);export{ae as default};
