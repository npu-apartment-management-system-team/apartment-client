import{e as F,l as b,s as B,m as S,I,f as x,R as A,g as R,L as $}from"./vant-60b60113.js";import{u as L}from"./vue-router-05758286.js";import{a as _}from"./js-cookie-edb2da2a.js";import{u as N,a as U}from"./index-e822aa76.js";import{s as z}from"./pinia-f48910fc.js";import{h as H}from"./index-37ebb221.js";import{_ as M}from"./index-7c043e02.js";import{R as a,V as T,C as e,U as t,J as V,u as s,W as h,X as D,S as r,Z as q,_ as E}from"./@vue-802b571a.js";import"./@vant-176bc72f.js";import"./index-4cb3d558.js";import"./axios-4a70c6fc.js";import"./@vueuse-94ed6524.js";import"./pinia-plugin-persistedstate-c44f3b64.js";const G=l=>(q("data-v-bf3f255d"),l=l(),E(),l),J=G(()=>h("h4",null,"欢迎使用员工公寓管理系统",-1)),W={__name:"MyHome",setup(l){const i=L(),d=N(),v=U(),{currentUser:p}=z(d),y=async()=>{await H(),d.reset(),v.reset(),_.remove("token"),await i.push("/login")},g=()=>{p.value.alipayId!==""?b({title:"提示",message:`您已绑定支付宝,您当前的支付宝账号为${p.value.alipayId},是否重新绑定?`,confirmButtonText:"绑定",cancelButtonText:"取消",confirmButtonColor:"#f00",showCancelButton:!0}).then(()=>{window.location.href="https://openauth.alipaydev.com/oauth2/publicAppAuthorize.htm?app_id=2021000121691518&scope=auth_user&redirect_uri=https%3A%2F%2Fapartment-server.wangminan.me%2Fapi%2Fuser%2Fbind%2Falipay%2Fcallback&state="+_.get("token")}).catch(()=>{B({type:"primary",message:"已取消重新解绑"})}):window.location.href="https://openauth.alipaydev.com/oauth2/publicAppAuthorize.htm?app_id=2021000121691518&scope=auth_user&redirect_uri=https%3A%2F%2Fapartment-server.wangminan.me%2Fapi%2Fuser%2Fbind%2Falipay%2Fcallback&state="+_.get("token")};return(X,o)=>{const k=S,w=I,f=x,C=A,u=F,n=R,c=$;return a(),T(V,null,[e(u,{inset:""},{default:t(()=>[e(C,{class:"personCard"},{default:t(()=>[e(f,{span:"8"},{default:t(()=>[e(w,{class:"avatar-container",round:"",width:"6rem",height:"6rem",src:s(p).faceUrl,fit:"cover"},{loading:t(()=>[e(k,{type:"spinner",size:"20"})]),_:1},8,["src"])]),_:1}),e(f,{span:"16"},{default:t(()=>[h("h2",null,D(s(p).name),1),J]),_:1})]),_:1})]),_:1}),e(u,{inset:""},{default:t(()=>[e(c,null,{default:t(()=>[(a(),r(n,{key:2,title:"住宿信息",onClick:o[0]||(o[0]=m=>s(i).push("/main/my/my-dormitory"))})),(a(),r(n,{key:2,title:"个人基础信息维护",onClick:o[1]||(o[1]=m=>s(i).push("/main/my/revise-info"))})),(a(),r(n,{key:3,title:"修改密码",onClick:o[2]||(o[2]=m=>s(i).push("/main/my/revise-password"))})),(a(),r(n,{key:4,title:"支付宝绑定与换绑",onClick:o[3]||(o[3]=m=>g())}))]),_:1})]),_:1}),e(u,{inset:""},{default:t(()=>[e(c,null,{default:t(()=>[(a(),r(n,{key:5,title:"隐私",onClick:o[4]||(o[4]=m=>s(i).push("/privacy"))}))]),_:1})]),_:1}),e(u,{inset:""},{default:t(()=>[e(c,null,{default:t(()=>[(a(),r(n,{key:6,title:"退出登录",onClick:y}))]),_:1})]),_:1})],64)}}},re=M(W,[["__scopeId","data-v-bf3f255d"]]);export{re as default};
