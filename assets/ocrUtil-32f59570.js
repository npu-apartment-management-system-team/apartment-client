import{_ as r}from"./index-a79a0e8e.js";import{O as g}from"./ali-oss-9dda75ed.js";import{b as h,c as f}from"./vant-70475d99.js";let c,w,m,b=(async()=>{let o,i,d,a,y;o={"x-oss-storage-class":"Standard","x-oss-object-acl":"public-read","x-oss-forbid-overwrite":"true"},i=()=>{function e(){return((1+window.crypto.getRandomValues(new Uint32Array(1))[0])*65536|0).toString(16).substring(1)}return`${+new Date}_${e()}${e()}`},d=async()=>{h({duration:0,forbidClick:!0,message:"\u6B63\u5728\u83B7\u53D6\u6587\u4EF6\u4E0A\u4F20\u51ED\u8BC1"});try{return await r.get("https://sts.wangminan.me/oss")}finally{f()}},a=await d(),y=new g({endpoint:"oss-cn-shanghai.aliyuncs.com",accessKeyId:a.data.AccessKeyId,accessKeySecret:a.data.AccessKeySecret,stsToken:a.data.SecurityToken,bucket:"wangminan-shanghai-files",useFetch:!0,secure:!0,refreshSTSToken:async()=>{const e=await r.get("https://sts.wangminan.me/oss");return{accessKeyId:e.AccessKeyId,accessKeySecret:e.AccessKeySecret,stsToken:e.SecurityToken}}}),w=async(e,s,t)=>await y.put(e+s+"_"+i()+"."+t.name.split(".")[1],t,{headers:o}),m=async e=>{const s=c(e.content,e.file.name),t=new FormData;return t.append("card",s),await r.post("/api/auth/register/ocr/idCard",t)},c=function(e,s){let t=e.split(","),p=t[0].match(/:(.*?);/)[1],u=window.atob(t[1]),n=u.length,l=new Uint8Array(n);for(;n--;)l[n]=u.charCodeAt(n);return new File([l],s,{type:p})}})();export{b as __tla,c as b,w as p,m as s};
