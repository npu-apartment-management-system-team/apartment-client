import{e as C,l as b,s as B,m as S,I,f as x,R as A,g as R,L}from"./vant-0fe543f7.js";import{u as N}from"./vue-router-cb3f8704.js";import{a as m}from"./js-cookie-edb2da2a.js";import{u as U,a as $}from"./index-5fa6e342.js";import{s as z}from"./pinia-49471876.js";import{h as H}from"./index-98a8b0fc.js";import{_ as M}from"./index-40edb61c.js";import{R as a,V as T,C as e,U as t,J as V,u as i,W as h,X as D,S as p,Z as q,_ as E}from"./@vue-b391e2c0.js";import"./@vant-803324af.js";import"./index-b9788df0.js";import"./axios-4a70c6fc.js";import"./@vueuse-9a68d694.js";import"./pinia-plugin-persistedstate-c44f3b64.js";const G=n=>(q("data-v-76bdc81e"),n=n(),E(),n),J=G(()=>h("h4",null,"欢迎使用员工公寓管理系统",-1)),W={__name:"MyHome",setup(n){const l=N(),u=U(),v=$(),{currentUser:s}=z(u),y=async()=>{await H(),u.reset(),v.reset(),m.remove("token"),await l.push("/login")},g=()=>{s.value.alipayId!==""?b({title:"提示",message:`您已绑定支付宝,您当前的支付宝账号为${s.value.alipayId},是否重新绑定?`,confirmButtonText:"绑定",cancelButtonText:"取消",confirmButtonColor:"#f00",showCancelButton:!0}).then(()=>{window.location.href="https://openauth.alipaydev.com/oauth2/publicAppAuthorize.htm?app_id=2021000121691518&scope=auth_user&redirect_uri=https%3A%2F%2Fapartment-server.wangminan.me%2Fapi%2Fuser%2Fbind%2Falipay%2Fcallback&state="+m.get("token")}).catch(()=>{B({type:"primary",message:"已取消重新解绑"})}):window.location.href="https://openauth.alipaydev.com/oauth2/publicAppAuthorize.htm?app_id=2021000121691518&scope=auth_user&redirect_uri=https%3A%2F%2Fapartment-server.wangminan.me%2Fapi%2Fuser%2Fbind%2Falipay%2Fcallback&state="+m.get("token")};return(X,o)=>{const w=S,k=I,_=x,F=A,c=C,r=R,d=L;return a(),T(V,null,[e(c,{inset:""},{default:t(()=>[e(F,{class:"personCard"},{default:t(()=>[e(_,{span:"8"},{default:t(()=>[e(k,{class:"avatar-container",round:"",width:"6rem",height:"6rem",src:i(s).faceUrl,fit:"cover"},{loading:t(()=>[e(w,{type:"spinner",size:"20"})]),_:1},8,["src"])]),_:1}),e(_,{span:"16"},{default:t(()=>[h("h2",null,D(i(s).name),1),J]),_:1})]),_:1})]),_:1}),e(c,{inset:""},{default:t(()=>[e(d,null,{default:t(()=>[(a(),p(r,{key:1,title:"个人信息维护",onClick:o[0]||(o[0]=f=>i(l).push("/main/my/revise-info"))})),(a(),p(r,{key:2,title:"修改密码",onClick:o[1]||(o[1]=f=>i(l).push("/main/my/revise-password"))})),(a(),p(r,{key:3,title:"支付宝绑定与换绑",onClick:o[2]||(o[2]=f=>g())}))]),_:1})]),_:1}),e(c,{inset:""},{default:t(()=>[e(d,null,{default:t(()=>[(a(),p(r,{key:4,title:"退出登录",onClick:y}))]),_:1})]),_:1})],64)}}},re=M(W,[["__scopeId","data-v-76bdc81e"]]);export{re as default};
