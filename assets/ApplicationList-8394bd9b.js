import{s as g,B as S,L as R,f as T,R as V,g as $,e as E}from"./vant-60b60113.js";import{h as q}from"./index-54fada6e.js";import{u as z}from"./vue-router-05758286.js";import{_ as D}from"./index-7c043e02.js";import{b as o,c as G,R as r,V as y,W as h,C as n,U as a,u as I,J as L,K as s,$ as U,S as F,X as l}from"./@vue-802b571a.js";import"./@vant-176bc72f.js";import"./index-4cb3d558.js";import"./axios-4a70c6fc.js";import"./js-cookie-edb2da2a.js";import"./pinia-f48910fc.js";import"./@vueuse-94ed6524.js";import"./pinia-plugin-persistedstate-c44f3b64.js";const J={class:"apply-btn-container"},K={class:"application-card-container"},M={__name:"ApplicationList",setup(W){const _=z(),c=o({pageNum:1,pageSize:10}),k=o({10:"入住申请完成",11:"提交入住申请",12:"本单位入住审批",13:"房寓段入住审批",14:"房建段入住分配宿舍",15:"入住已缴纳押金",16:"入住申请被本单位驳回",17:"入住申请被房建段驳回",18:"缴纳押金超时",19:"班组长确认超时",110:"用户撤回入住申请",20:"调宿申请完成",21:"提交调宿申请",22:"本单位通过调宿申请",23:"房建段通过调宿申请",24:"房建段分配新宿舍",25:"原有宿管确认离宿",26:"调宿申请被本单位驳回",27:"调宿申请被房建段驳回",28:"缴纳押金超时",29:"班组长确认超时",210:"用户撤回调宿申请",30:"退宿申请完成",31:"提交退宿申请",32:"班组长确认退宿超时",33:"用户撤回退宿申请"}),w=o({0:"入住申请",1:"调宿申请",2:"退宿申请"}),d=o([]),C=o(0),i=o(!1),m=o(!1),f=async()=>{i.value=!0;try{const t=await q(c.value);t!==null&&t.code===2e3?(d.value.push(...t.result.list),C.value=t.total,c.value.pageNum++,t.result.list!==c.value.pageSize&&(m.value=!0)):t!==null?g({type:"danger",message:`获取申请列表失败：${t.msg}`}):g({type:"danger",message:"获取申请列表失败：未知错误"})}finally{i.value=!1}};G(async()=>{await f()});const x=async t=>{await _.push({name:"main-application-detail",query:{id:t.id}})};return(t,p)=>{const b=S,v=T,u=V,A=$,B=E,N=R;return r(),y(L,null,[h("div",J,[n(b,{type:"primary",plain:"",block:"",onClick:p[0]||(p[0]=e=>I(_).push("/main/application/create-application"))},{default:a(()=>[s(" 新增申请 ")]),_:1})]),h("div",K,[n(N,{loading:i.value,"onUpdate:loading":p[1]||(p[1]=e=>i.value=e),finished:m.value,"finished-text":"没有更多申请了",onLoad:f},{default:a(()=>[(r(!0),y(L,null,U(d.value,e=>(r(),F(B,{inset:"",style:{"margin-top":"2%"},key:e},{default:a(()=>[n(A,{class:"application-item",onClick:X=>x(e)},{default:a(()=>[n(u,null,{default:a(()=>[n(v,{span:"12"},{default:a(()=>[s(" 申请序列号: "+l(e.id),1)]),_:2},1024),n(v,{span:"12"},{default:a(()=>[s(" 申请类型: "+l(w.value[e.type]),1)]),_:2},1024)]),_:2},1024),n(u,null,{default:a(()=>[s(" 申请进度: "+l(k.value[e.applicationStatus]),1)]),_:2},1024),n(u,null,{default:a(()=>[s(" 提交时间: "+l(e.createTime),1)]),_:2},1024),n(u,null,{default:a(()=>[s(" 最后更新时间: "+l(e.updateTime),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1},8,["loading","finished"])])],64)}}},st=D(M,[["__scopeId","data-v-b8ada945"]]);export{st as default};
